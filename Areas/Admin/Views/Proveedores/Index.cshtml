@model List<TiendaPc.Models.Proveedor>
@{
  Layout = "/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
  ViewData["Title"] = "Proveedores";

  string q = ViewBag.Q as string ?? "";
  bool? activos = ViewBag.Activos as bool?;
}

<h3>Proveedores</h3>

@if (TempData["msg"] != null) {
  <div class="alert alert-success">@TempData["msg"]</div>
}

<form class="row g-2 mb-3">
  <div class="col-md-5">
    <input class="form-control" name="q" value="@q" placeholder="RUC, razón social, teléfono o correo" />
  </div>
  <div class="col-md-3">
    <select name="activos" class="form-select">
      <option value="">Todos</option>
      <option value="true"  selected="@(activos == true)">Activos</option>
      <option value="false" selected="@(activos == false)">Inactivos</option>
    </select>
  </div>
  <div class="col-md-2">
    <button class="btn btn-dark w-100">Filtrar</button>
  </div>
  <div class="col-md-2 text-md-end">
    <a class="btn btn-primary w-100" asp-action="Create">Nuevo</a>
  </div>
</form>

@if (Model == null || Model.Count == 0) {
  <div class="alert alert-info">No se encontraron proveedores.</div>
} else {
<div class="table-responsive">
<table class="table table-hover align-middle">
  <thead>
    <tr>
      <th>RUC</th>
      <th>Razón social</th>
      <th>Contacto</th>
      <th>Teléfono</th>
      <th>Email</th>
      <th>Estado</th>
      <th style="width:210px"></th>
    </tr>
  </thead>
  <tbody>
  @foreach (var p in Model)
  {
    <tr>
      <td>@p.Ruc</td>
      <td>@p.RazonSocial</td>
      <td>@p.Contacto</td>
      <td>@p.Telefono</td>
      <td>@p.Email</td>
      <td>@(p.Activo ? "Activo" : "Inactivo")</td>
      <td class="text-end">
        <a class="btn btn-sm btn-outline-secondary" asp-action="Details" asp-route-id="@p.IdProveedor">Ver</a>
        <a class="btn btn-sm btn-outline-primary ms-1" asp-action="Edit" asp-route-id="@p.IdProveedor">Editar</a>
        <form method="post" asp-action="Delete" asp-route-id="@p.IdProveedor" class="d-inline"
              onsubmit="return confirm('¿Eliminar proveedor?');">
          @Html.AntiForgeryToken()
          <button class="btn btn-sm btn-outline-danger ms-1">Eliminar</button>
        </form>
      </td>
    </tr>
  }
  </tbody>
</table>
</div>
}
